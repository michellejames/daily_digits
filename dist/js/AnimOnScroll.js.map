{"version":3,"sources":["AnimOnScroll.js"],"names":["window","docElem","document","documentElement","getViewportH","client","inner","scrollY","pageYOffset","scrollTop","getOffset","el","offsetTop","offsetLeft","isNaN","offsetParent","top","left","inViewport","h","elH","offsetHeight","scrolled","viewed","elTop","elBottom","extend","a","b","key","hasOwnProperty","AnimOnScroll","options","defaults","_init","prototype","minDuration","maxDuration","viewportFactor","items","Array","slice","call","querySelectorAll","id","itemsCount","length","itemsRenderedCount","didScroll","self","imagesLoaded","Masonry","itemSelector","transitionDuration","Modernizr","cssanimations","forEach","_checkTotalRendered","classie","add","addEventListener","_onScrollFn","_resizeHandler","setTimeout","_scrollPage","has","perspY","style","WebkitPerspectiveOrigin","MozPerspectiveOrigin","perspectiveOrigin","randDuration","Math","random","WebkitAnimationDuration","MozAnimationDuration","animationDuration","delayed","resizeTimeout","clearTimeout","removeEventListener"],"mappings":";;AAAA;;;;;;;;;;AAUA,CAAC,CAAE,UAAUA,MAAV,EAAmB;;AAErB;;AAEA,KAAIC,UAAUD,OAAOE,QAAP,CAAgBC,eAA9B;;AAEA,UAASC,YAAT,GAAwB;AACvB,MAAIC,SAASJ,QAAQ,cAAR,CAAb;AAAA,MACCK,QAAQN,OAAO,aAAP,CADT;;AAGA,MAAIK,SAASC,KAAb,EACC,OAAOA,KAAP,CADD,KAGC,OAAOD,MAAP;AACD;;AAED,UAASE,OAAT,GAAmB;AAClB,SAAOP,OAAOQ,WAAP,IAAsBP,QAAQQ,SAArC;AACA;;AAED;AACA,UAASC,SAAT,CAAoBC,EAApB,EAAyB;AACxB,MAAIC,YAAY,CAAhB;AAAA,MAAmBC,aAAa,CAAhC;AACA,KAAG;AACF,OAAK,CAACC,MAAOH,GAAGC,SAAV,CAAN,EAA8B;AAC7BA,iBAAaD,GAAGC,SAAhB;AACA;AACD,OAAK,CAACE,MAAOH,GAAGE,UAAV,CAAN,EAA+B;AAC9BA,kBAAcF,GAAGE,UAAjB;AACA;AACD,GAPD,QAOSF,KAAKA,GAAGI,YAPjB;;AASA,SAAO;AACNC,QAAMJ,SADA;AAENK,SAAOJ;AAFD,GAAP;AAIA;;AAED,UAASK,UAAT,CAAqBP,EAArB,EAAyBQ,CAAzB,EAA6B;AAC5B,MAAIC,MAAMT,GAAGU,YAAb;AAAA,MACCC,WAAWf,SADZ;AAAA,MAECgB,SAASD,WAAWlB,cAFrB;AAAA,MAGCoB,QAAQd,UAAUC,EAAV,EAAcK,GAHvB;AAAA,MAICS,WAAWD,QAAQJ,GAJpB;;AAKC;AACA;AACA;AACAD,MAAIA,KAAK,CARV;;AAUA,SAAQK,QAAQJ,MAAMD,CAAf,IAAqBI,MAArB,IAAgCE,WAAWL,MAAMD,CAAlB,IAAwBG,QAA9D;AACA;;AAED,UAASI,MAAT,CAAiBC,CAAjB,EAAoBC,CAApB,EAAwB;AACvB,OAAK,IAAIC,GAAT,IAAgBD,CAAhB,EAAoB;AACnB,OAAIA,EAAEE,cAAF,CAAkBD,GAAlB,CAAJ,EAA8B;AAC7BF,MAAEE,GAAF,IAASD,EAAEC,GAAF,CAAT;AACA;AACD;AACD,SAAOF,CAAP;AACA;;AAED,UAASI,YAAT,CAAuBpB,EAAvB,EAA2BqB,OAA3B,EAAqC;AACpC,OAAKrB,EAAL,GAAUA,EAAV;AACA,OAAKqB,OAAL,GAAeN,OAAQ,KAAKO,QAAb,EAAuBD,OAAvB,CAAf;AACA,OAAKE,KAAL;AACA;;AAEDH,cAAaI,SAAb,GAAyB;AACxBF,YAAW;AACV;AACAG,gBAAc,CAFJ;AAGVC,gBAAc,CAHJ;AAIV;AACA;AACA;AACAC,mBAAiB;AAPP,GADa;AAUxBJ,SAAQ,iBAAW;AAClB,QAAKK,KAAL,GAAaC,MAAML,SAAN,CAAgBM,KAAhB,CAAsBC,IAAtB,CAA4BxC,SAASyC,gBAAT,CAA2B,MAAM,KAAKhC,EAAL,CAAQiC,EAAd,GAAmB,OAA9C,CAA5B,CAAb;AACA,QAAKC,UAAL,GAAkB,KAAKN,KAAL,CAAWO,MAA7B;AACA,QAAKC,kBAAL,GAA0B,CAA1B;AACA,QAAKC,SAAL,GAAiB,KAAjB;;AAEA,OAAIC,OAAO,IAAX;;AAEAC,gBAAc,KAAKvC,EAAnB,EAAuB,YAAW;;AAEjC;AACA,QAAIwC,OAAJ,CAAaF,KAAKtC,EAAlB,EAAsB;AACrByC,mBAAc,IADO;AAErBC,yBAAqB;AAFA,KAAtB;;AAKA,QAAIC,UAAUC,aAAd,EAA8B;AAC7B;AACAN,UAAKV,KAAL,CAAWiB,OAAX,CAAoB,UAAU7C,EAAV,EAAe;AAClC,UAAIO,WAAYP,EAAZ,CAAJ,EAAuB;AACtBsC,YAAKQ,mBAAL;AACAC,eAAQC,GAAR,CAAahD,EAAb,EAAiB,OAAjB;AACA;AACD,MALD;;AAOA;AACAX,YAAO4D,gBAAP,CAAyB,QAAzB,EAAmC,YAAW;AAC7CX,WAAKY,WAAL;AACA,MAFD,EAEG,KAFH;AAGA7D,YAAO4D,gBAAP,CAAyB,QAAzB,EAAmC,YAAW;AAC7CX,WAAKa,cAAL;AACA,MAFD,EAEG,KAFH;AAGA;AAED,IA1BD;AA2BA,GA7CuB;AA8CxBD,eAAc,uBAAW;AACxB,OAAIZ,OAAO,IAAX;AACA,OAAI,CAAC,KAAKD,SAAV,EAAsB;AACrB,SAAKA,SAAL,GAAiB,IAAjB;AACAe,eAAY,YAAW;AAAEd,UAAKe,WAAL;AAAqB,KAA9C,EAAgD,EAAhD;AACA;AACD,GApDuB;AAqDxBA,eAAc,uBAAW;AACxB,OAAIf,OAAO,IAAX;AACA,QAAKV,KAAL,CAAWiB,OAAX,CAAoB,UAAU7C,EAAV,EAAe;AAClC,QAAI,CAAC+C,QAAQO,GAAR,CAAatD,EAAb,EAAiB,OAAjB,CAAD,IAA+B,CAAC+C,QAAQO,GAAR,CAAatD,EAAb,EAAiB,SAAjB,CAAhC,IAAgEO,WAAYP,EAAZ,EAAgBsC,KAAKjB,OAAL,CAAaM,cAA7B,CAApE,EAAoH;AACnHyB,gBAAY,YAAW;AACtB,UAAIG,SAAS3D,YAAYH,iBAAiB,CAA1C;AACA6C,WAAKtC,EAAL,CAAQwD,KAAR,CAAcC,uBAAd,GAAwC,SAASF,MAAT,GAAkB,IAA1D;AACAjB,WAAKtC,EAAL,CAAQwD,KAAR,CAAcE,oBAAd,GAAqC,SAASH,MAAT,GAAkB,IAAvD;AACAjB,WAAKtC,EAAL,CAAQwD,KAAR,CAAcG,iBAAd,GAAkC,SAASJ,MAAT,GAAkB,IAApD;;AAEAjB,WAAKQ,mBAAL;;AAEA,UAAIR,KAAKjB,OAAL,CAAaI,WAAb,IAA4Ba,KAAKjB,OAAL,CAAaK,WAA7C,EAA2D;AAC1D,WAAIkC,eAAiBC,KAAKC,MAAL,MAAkBxB,KAAKjB,OAAL,CAAaK,WAAb,GAA2BY,KAAKjB,OAAL,CAAaI,WAA1D,IAA0Ea,KAAKjB,OAAL,CAAaI,WAAzF,GAAyG,GAA5H;AACAzB,UAAGwD,KAAH,CAASO,uBAAT,GAAmCH,YAAnC;AACA5D,UAAGwD,KAAH,CAASQ,oBAAT,GAAgCJ,YAAhC;AACA5D,UAAGwD,KAAH,CAASS,iBAAT,GAA6BL,YAA7B;AACA;;AAEDb,cAAQC,GAAR,CAAahD,EAAb,EAAiB,SAAjB;AACA,MAhBD,EAgBG,EAhBH;AAiBA;AACD,IApBD;AAqBA,QAAKqC,SAAL,GAAiB,KAAjB;AACA,GA7EuB;AA8ExBc,kBAAiB,0BAAW;AAC3B,OAAIb,OAAO,IAAX;AACA,YAAS4B,OAAT,GAAmB;AAClB5B,SAAKe,WAAL;AACAf,SAAK6B,aAAL,GAAqB,IAArB;AACA;AACD,OAAK,KAAKA,aAAV,EAA0B;AACzBC,iBAAc,KAAKD,aAAnB;AACA;AACD,QAAKA,aAAL,GAAqBf,WAAYc,OAAZ,EAAqB,IAArB,CAArB;AACA,GAxFuB;AAyFxBpB,uBAAsB,+BAAW;AAChC,KAAE,KAAKV,kBAAP;AACA,OAAI,KAAKA,kBAAL,KAA4B,KAAKF,UAArC,EAAkD;AACjD7C,WAAOgF,mBAAP,CAA4B,QAA5B,EAAsC,KAAKnB,WAA3C;AACA;AACD;AA9FuB,EAAzB;;AAiGA;AACA7D,QAAO+B,YAAP,GAAsBA,YAAtB;AAEA,CAvKA,EAuKI/B,MAvKJ","file":"AnimOnScroll.js","sourcesContent":["/**\n * animOnScroll.js v1.0.0\n * http://www.codrops.com\n *\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n * \n * Copyright 2013, Codrops\n * http://www.codrops.com\n */\n;( function( window ) {\n\t\n\t'use strict';\n\t\n\tvar docElem = window.document.documentElement;\n\n\tfunction getViewportH() {\n\t\tvar client = docElem['clientHeight'],\n\t\t\tinner = window['innerHeight'];\n\t\t\n\t\tif( client < inner )\n\t\t\treturn inner;\n\t\telse\n\t\t\treturn client;\n\t}\n\n\tfunction scrollY() {\n\t\treturn window.pageYOffset || docElem.scrollTop;\n\t}\n\n\t// http://stackoverflow.com/a/5598797/989439\n\tfunction getOffset( el ) {\n\t\tvar offsetTop = 0, offsetLeft = 0;\n\t\tdo {\n\t\t\tif ( !isNaN( el.offsetTop ) ) {\n\t\t\t\toffsetTop += el.offsetTop;\n\t\t\t}\n\t\t\tif ( !isNaN( el.offsetLeft ) ) {\n\t\t\t\toffsetLeft += el.offsetLeft;\n\t\t\t}\n\t\t} while( el = el.offsetParent );\n\n\t\treturn {\n\t\t\ttop : offsetTop,\n\t\t\tleft : offsetLeft\n\t\t};\n\t}\n\n\tfunction inViewport( el, h ) {\n\t\tvar elH = el.offsetHeight,\n\t\t\tscrolled = scrollY(),\n\t\t\tviewed = scrolled + getViewportH(),\n\t\t\telTop = getOffset(el).top,\n\t\t\telBottom = elTop + elH,\n\t\t\t// if 0, the element is considered in the viewport as soon as it enters.\n\t\t\t// if 1, the element is considered in the viewport only when it's fully inside\n\t\t\t// value in percentage (1 >= h >= 0)\n\t\t\th = h || 0;\n\n\t\treturn (elTop + elH * h) <= viewed && (elBottom - elH * h) >= scrolled;\n\t}\n\n\tfunction extend( a, b ) {\n\t\tfor( var key in b ) { \n\t\t\tif( b.hasOwnProperty( key ) ) {\n\t\t\t\ta[key] = b[key];\n\t\t\t}\n\t\t}\n\t\treturn a;\n\t}\n\n\tfunction AnimOnScroll( el, options ) {\t\n\t\tthis.el = el;\n\t\tthis.options = extend( this.defaults, options );\n\t\tthis._init();\n\t}\n\n\tAnimOnScroll.prototype = {\n\t\tdefaults : {\n\t\t\t// Minimum and a maximum duration of the animation (random value is chosen)\n\t\t\tminDuration : 0,\n\t\t\tmaxDuration : 0,\n\t\t\t// The viewportFactor defines how much of the appearing item has to be visible in order to trigger the animation\n\t\t\t// if we'd use a value of 0, this would mean that it would add the animation class as soon as the item is in the viewport. \n\t\t\t// If we were to use the value of 1, the animation would only be triggered when we see all of the item in the viewport (100% of it)\n\t\t\tviewportFactor : 0\n\t\t},\n\t\t_init : function() {\n\t\t\tthis.items = Array.prototype.slice.call( document.querySelectorAll( '#' + this.el.id + ' > li' ) );\n\t\t\tthis.itemsCount = this.items.length;\n\t\t\tthis.itemsRenderedCount = 0;\n\t\t\tthis.didScroll = false;\n\n\t\t\tvar self = this;\n\n\t\t\timagesLoaded( this.el, function() {\n\t\t\t\t\n\t\t\t\t// initialize masonry\n\t\t\t\tnew Masonry( self.el, {\n\t\t\t\t\titemSelector: 'li',\n\t\t\t\t\ttransitionDuration : 0\n\t\t\t\t} );\n\t\t\t\t\n\t\t\t\tif( Modernizr.cssanimations ) {\n\t\t\t\t\t// the items already shown...\n\t\t\t\t\tself.items.forEach( function( el ) {\n\t\t\t\t\t\tif( inViewport( el ) ) {\n\t\t\t\t\t\t\tself._checkTotalRendered();\n\t\t\t\t\t\t\tclassie.add( el, 'shown' );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t// animate on scroll the items inside the viewport\n\t\t\t\t\twindow.addEventListener( 'scroll', function() {\n\t\t\t\t\t\tself._onScrollFn();\n\t\t\t\t\t}, false );\n\t\t\t\t\twindow.addEventListener( 'resize', function() {\n\t\t\t\t\t\tself._resizeHandler();\n\t\t\t\t\t}, false );\n\t\t\t\t}\n\n\t\t\t});\n\t\t},\n\t\t_onScrollFn : function() {\n\t\t\tvar self = this;\n\t\t\tif( !this.didScroll ) {\n\t\t\t\tthis.didScroll = true;\n\t\t\t\tsetTimeout( function() { self._scrollPage(); }, 60 );\n\t\t\t}\n\t\t},\n\t\t_scrollPage : function() {\n\t\t\tvar self = this;\n\t\t\tthis.items.forEach( function( el ) {\n\t\t\t\tif( !classie.has( el, 'shown' ) && !classie.has( el, 'animate' ) && inViewport( el, self.options.viewportFactor ) ) {\n\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\tvar perspY = scrollY() + getViewportH() / 2;\n\t\t\t\t\t\tself.el.style.WebkitPerspectiveOrigin = '50% ' + perspY + 'px';\n\t\t\t\t\t\tself.el.style.MozPerspectiveOrigin = '50% ' + perspY + 'px';\n\t\t\t\t\t\tself.el.style.perspectiveOrigin = '50% ' + perspY + 'px';\n\n\t\t\t\t\t\tself._checkTotalRendered();\n\n\t\t\t\t\t\tif( self.options.minDuration && self.options.maxDuration ) {\n\t\t\t\t\t\t\tvar randDuration = ( Math.random() * ( self.options.maxDuration - self.options.minDuration ) + self.options.minDuration ) + 's';\n\t\t\t\t\t\t\tel.style.WebkitAnimationDuration = randDuration;\n\t\t\t\t\t\t\tel.style.MozAnimationDuration = randDuration;\n\t\t\t\t\t\t\tel.style.animationDuration = randDuration;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tclassie.add( el, 'animate' );\n\t\t\t\t\t}, 25 );\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.didScroll = false;\n\t\t},\n\t\t_resizeHandler : function() {\n\t\t\tvar self = this;\n\t\t\tfunction delayed() {\n\t\t\t\tself._scrollPage();\n\t\t\t\tself.resizeTimeout = null;\n\t\t\t}\n\t\t\tif ( this.resizeTimeout ) {\n\t\t\t\tclearTimeout( this.resizeTimeout );\n\t\t\t}\n\t\t\tthis.resizeTimeout = setTimeout( delayed, 1000 );\n\t\t},\n\t\t_checkTotalRendered : function() {\n\t\t\t++this.itemsRenderedCount;\n\t\t\tif( this.itemsRenderedCount === this.itemsCount ) {\n\t\t\t\twindow.removeEventListener( 'scroll', this._onScrollFn );\n\t\t\t}\n\t\t}\n\t};\n\n\t// add to global namespace\n\twindow.AnimOnScroll = AnimOnScroll;\n\n} )( window );"]}